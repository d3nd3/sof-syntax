{
  "scopeName": "source.func",
  "name": "SoF - SoFPlus Function",
  "firstLineMatch": "\\b.*function *._init\\b",
  "patterns": [
    { "include": "#comment" },
    { "include": "#function" },
    { "include": "#commands" }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "name": "comment.line.double-slash.func",
          "begin": "//",
          "end": "$",
          "patterns": [
            {
              "name": "comment.func",
              "match": ".*"
            }
          ]
        }
      ]
    },
    "function": {
      "patterns": [
        {
          "name": "keyword.func",
          "match": "function",
          "captures": {
            "0": { "name": "keyword.func" }
          }
        },
        {
          "name": "entity.name.function.func",
          "match": "\\b(.*\\w+$)|(.*?)(?=\\()\\b"
        },
        {
          "name": "keyword.control.func",
          "match": "(?<!~)\\b(sp_sc_flow_if|sp_sc_flow_while|else)\\b"
        },
        {
          "name": "constant.other.func",
          "match": "\\b(number|text|itext)\\b"
        },
        {
          "name": "invalid.deprecated.func",
          "match": "\\b(\\sN\\s+.?|\\sn\\s+.?|\\sT\\s+.?|\\st\\s+.?|\\sTI\\s+.?|\\sti\\s+.?)\\b"
        },
        {
          "name": "string.meta.string.func",
          "match": "\\b(cvar|val)\\b"
        },
        {
          "name": "keyword.operator.func",
          "match": "\\s(\\>|\\<|\\>=|\\<=|==|!=|=)\\s"
        }
      ]
    },
    "commands": {
      "patterns": [
        {
          "name": "keyword.other.func",
          "match": "(?<!~)\\b(wait|stop|stopsound|return|menuoff|popmenu|refresh|killmenu)\\b"
        },
        {
          "name": "string.unquoted.command.func",
          "match": "(?x)(?<!~)\\b(path|help|info|kill|cpuid|elbow|ninja|pause|score|skins|reload|status|cmdlist|entlist|heretic|ip_list|loading|newsave|phantom|players|vid_front|vid_restart|rawshot|viewpos|z_stats|bigelbow|bindlist|changing|cl_touch|conchars|cvarlist|hackteam|itemdrop|itemnext|itemprev|precache|filter_write|clear|sizeup|sizedown|minimise|usermisc|weapnext|weapprev|itemuse|ff_usejoy|freshgame|heartbeat|imagelist|playlevel|quickload|quicksave|reconnect|reloadall|savesleft|soundinfo|soundlist|unbindall|useritems|savekeys|teamview|userammo|userinfo|getgamestats|putaway|vid_modes|centerview|disconnect|gl_strings|killserver|listignore|playerlist|saveconfig|screenshot|serverinfo|serverstop|togglechat|weapondrop|weaponlose|destroyents|ff_usemouse|filter_list|gsc_connect|listpickups|pingservers|reset_predn|snd_restart|updateinven|userweapons|hackkillbots|list_dmflags|toggleconsole|defaultweapons|gsc_disconnect|maxfpsfromrate|updateinvfinal|weaponbestsafe|gsc_getchannels|killallmonsters|givemoretutorial|turnonmissionmsg|weaponbestunsafe|turnoffmissionmsg|givesnipertutorial|joy_advancedupdateexit)\\b"
        },
        {
          "name": "keyword.other.func",
          "match": "(?<!~)\\b(error|quit|exit|wipe)\\b"
        },
        {
          "name": "keyword.other.func",
          "match": "(?<!~)\\b(rcon)\\b"
        },
        {
          "name": "keyword.control.func",
          "match": "(?<!~)\\b(cmd)\\b"
        },
        {
          "name": "variable.function.func",
          "match": "(?<!~)\\b(bind|unbind|set|sset|setenv|echo|say|set_dmflags|unset_dmflags|subliminal)\\b"
        },
        {
          "name": "variable.function.func",
          "match": "(?x)(?<!~)\\b(or|xor|and|zero|map|add|dir|go|avi|sky|kick|load|menu|ping|play|save|wave|link|cloud|gimme|ignore|record|messagemode|select|addfave|bot_add|bot_rem|condump|connect|demomap|fx_load|fx_save|gamemap|gsc_ban|remfave|filter_add|adddownload|loadpoint|ff_tension|forcesong|winstart|checkpass|changepass|terrain|dumpuser|gsc_join|gsc_private|gsc_setusermode|gsc_kick|gsc_part|gsc_talk|Say_team|say_team|unignore|ff_spring|intermission|messagemode2|serverrecord|serverstatus|weaponselect|filter_remove|gsc_gettopic|gsc_getusers|gsc_settopic|sv_precache|timerefresh|alias)\\b"
        },
        {
          "name": "variable.function.func",
          "match": "(?x)(?<!~)\\b(sp_sc_alias|sp_sc_cvar_append|sp_sc_cvar_append_newline|sp_sc_cvar_big_text|sp_sc_cvar_copy|sp_sc_cvar_copy_latched|sp_sc_cvar_escape|sp_sc_cvar_math_abs|sp_sc_cvar_math_add|sp_sc_cvar_math_ceil|sp_sc_cvar_math_div|sp_sc_cvar_math_floor|sp_sc_cvar_math_mod|sp_sc_cvar_math_mul|sp_sc_cvar_math_sqrt|sp_sc_cvar_math_sub|sp_sc_cvar_nbsp|sp_sc_cvar_no_color|sp_sc_cvar_random_float|sp_sc_cvar_random_int|sp_sc_cvar_split|sp_sc_cvar_sset|sp_sc_cvar_substr|sp_sc_cvar_unescape|sp_sc_cvar_unhex|sp_sc_cvar_hex|sp_sv_client_cvar_set|sp_sc_cvar_len|sp_sc_info_net|sp_sc_info_net_reset|sp_sc_info_time|sp_sc_uptime|sp_sv_client_check|sp_sv_info_client|sp_sv_info_client_mod|sp_sv_info_frames|sp_sv_players|sp_sv_print_broadcast|sp_sv_print_client|sp_sv_print_sp_broadcast|sp_sv_print_sp_client|sp_sv_sound_broadcast|sp_sv_sound_client|sp_cl_info_map|sp_cl_info_pos|sp_cl_info_skins|sp_cl_debuggraph|tgashot)\\b"
        },
        {
          "name": "variable.function.func",
          "match": "(?x)(?<!~)\\b(sf_sv_ent_use|sf_sv_hook_at|sf_sv_int_add|sf_sv_math_or|sf_sv_ent_anim|sf_sv_ent_find|sf_sv_ent_tint|sf_sv_math_and|sf_sv_math_cos|sf_sv_math_not|sf_sv_math_sin|sf_sv_math_tan|sf_sv_print_cinprintf|sf_sv_ent_spawn|sf_sv_ent_vects|sf_sv_math_acos|sf_sv_math_asin|sf_sv_math_atan|sf_sv_check_reso|sf_sv_draw_clear|sf_sv_ent_create|sf_sv_ent_relink|sf_sv_ent_model|sf_sv_sound_remove|sf_sv_ent_remove|sf_sv_ghoul_list|sf_sv_image_list|sf_sv_player_ent|sf_sv_player_pos|sf_sv_script_run|sf_sv_sound_list|sf_sv_vector_set|sf_sv_draw_string|sf_sv_effect_list|sf_sv_ghoul_scale|sf_sv_player_anim|sf_sv_player_move|sf_sv_script_load|sf_sv_sofree_help|sf_sv_vector_copy|sf_sv_vector_grow|sf_sv_draw_string2|sf_sv_effect_start|sf_sv_ent_callback|sf_sv_mem_read_int|sf_sv_ent_paint|sf_sv_effect_endpos|sf_sv_ent_field_get|sf_sv_ent_field_set|sf_sv_mem_read_char|sf_sv_mem_write_int|sf_sv_player_effect|sf_sv_print_bprintf|sf_sv_print_cprintf|sf_sv_mem_write_string|sf_sv_jmp_at|sf_sv_draw_altstring|sf_sv_ghoul_register|sf_sv_image_register|sf_sv_mem_read_float|sf_sv_mem_read_short|sf_sv_mem_write_char|sf_sv_player_gravity|sf_sv_sound_override|sf_sv_sound_play_ent|sf_int_add|sf_sv_sound_register|sf_sv_effect_register|sf_sv_ghoul_translate|sf_sv_mem_read_string|sf_sv_mem_write_float|sf_sv_mem_write_short|sf_sv_configstring_set|sf_sv_spackage_register|sf_sv_player_paint|sf_sv_player_collision|sf_sv_player_weap_lock|sf_sv_player_allow_walk|sf_sv_player_weap_paint|sf_sv_print_centerprint|sf_sv_sound_play_origin|sf_sv_spackage_print_id|sf_sv_player_allow_altattack|sf_sv_player_weap_switch|sf_sv_print_welcomeprint|sf_sv_spackage_print_ref|sf_sv_player_allow_attack|sf_sv_player_weap_current|sf_sv_spackage_print_obit|sf_sv_spackage_print_string|sf_sv_script_unload|sf_sv_trigger_set_size|sp_sv_ent_create|sp_sv_trigger_set_size|sf_sv_info_client|sf_sv_save_reso)\\b"
        },
        {
          "name": "keyword.operator.func",
          "match": "(\\!)|(\\+)|(\\-)"
        },
        {
          "name": "keyword.control.semicolon.func",
          "match": ";"
        }
      ]
    },
    "macroexpand": {
      "patterns": [
        {
          "name": "constant.character.escape.func",
          "match": "(\\$)|(\\#)"
        }
      ]
    },
    "localvar": {
      "patterns": [
        {
          "name": "variable.parameter.func",
          "match": "(\\~)(?=\\s)|(\\~)"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "keyword.punctuation.definition.keyword.func",
          "match": "(\\s\\-)|(\\s\\+)"
        },
        {
          "name": "constant.numeric.func",
          "match": "(?x)(?:(?:\\b\\d(?:[\\d']*\\d)?\\.\\d(?:[\\d']*\\d)?|\\B\\.\\d(?:[\\d']*\\d)?)(?:[Ee][+-]?\\d(?:[\\d']*\\d)?)?(?:[fFlL]|(?:i[fl]?|h|min|[mun]?s|_\\w*))?\\b|(?:\\b\\d(?:[\\d']*\\d)?\\.)(?:\\B|(?:[fFlL]|(?:i[fl]?|h|min|[mun]?s|_\\w*))\\b|(?:[Ee][+-]?\\d(?:[\\d']*\\d)?)(?:[fFlL]|(?:i[fl]?|h|min|[mun]?s|_\\w*))?\\b)|\\b\\d(?:[\\d']*\\d)?(?:[Ee][+-]?\\d(?:[\\d']*\\d)?)(?:[fFlL]|(?:i[fl]?|h|min|[mun]?s|_\\w*))?\\b)|\\b(?:(?:[1-9](?:[\\d']*\\d)?|0(?:[0-7']*[0-7])?|0[Xx][\\da-fA-F](?:[\\da-fA-F']*[\\da-fA-F])?|0[Bb][01](?:[01']*[01])?)(?:(?:l{1,2}|L{1,2})[uU]?|[uU](?:l{0,2}|L{0,2})|(?:i[fl]?|h|min|[mun]?s|_\\w*))?)\\b)"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.func",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.func",
              "match": "\"\""
            }
          ]
        }
      ]
    }
  }
}